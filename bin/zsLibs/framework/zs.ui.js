window.zs=window.zs||{},window.zs.ui=window.zs.ui||{},function(t){"use strict";class e extends fairygui.GComponent{constructor(){super(...arguments),this.picture=null,this.desc=null,this.title=null,this.data=null}static createInstance(){return null}}e.URL=null;class s extends fairygui.GComponent{static bind(t){zs.ui.bind(t,this.itemName,s),this.pack=t}static createInstance(){return fairygui.UIPackage.createObject(this.pack.name,this.itemName)}onConstruct(){this.background=this.getChild("background"),this.list=this.getChild("list")}}s.itemName="list";class n extends fairygui.GComponent{static bind(t){zs.ui.bind(t,this.itemName,n),this.pack=t}static createInstance(){return fairygui.UIPackage.createObject(this.pack.name,this.itemName)}onConstruct(){this.state=this.getController("state"),this.title=this.getChild("title"),this.content=this.getChild("content"),this.btn_confirm=this.getChild("btn_confirm"),this.btn_cancel=this.getChild("btn_cancel")}}n.itemName="msgbox";class i extends fairygui.GComponent{static createInstance(){let t=new fairygui.GComponent;t.width=fairygui.GRoot.inst.width,t.height=fairygui.GRoot.inst.height;let e=new fairygui.GGraph;e.drawRect(0,zs.proxy.color("#000000"),zs.proxy.color("#000000")),t.addChild(e),e.x=.25*-t.width,e.y=.25*-t.height,e.width=2*t.width,e.height=2*t.height;let s=new fairygui.GTextField;return s.pivotX=.5,s.pivotY=.5,s.x=.5*t.width,s.y=.5*t.height,s.addRelation(t,fairygui.RelationType.Center_Center),s.addRelation(t,fairygui.RelationType.Middle_Middle),s.fontSize=100,s.text="",s.color=zs.proxy.color("#FFFFFF"),t.loadingValue=t.addChild(s),t}}i.itemName="loading";class r extends zs.fgui.base{static checkEggOpen(t){return!!zs.EggKnock&&zs.EggKnock.checkEggOpen(t)}get btnKnock(){return null}constructor(t){super(t),this.clickPercent=.14,this.rollbackPercent=.01,this.rollbackInterval=20,this.bannerTime=3e3,this.bannerRange=[.3,.7],this.awardDelay=[1e3,1e3],this.closeDelay=[1e3,1040],this.btnSrcOffset=0,this.btnDstOffset=370,this.btnOffsetDelay=800,this.btnOffsetTime=500,this.btnIgnoreOffset=!1}dispose(){zs.Timer.inst.clearAll(this),zs.Tween.clearAll(this.btnKnock),zs.core.removeAppShow(zs.Handler.create(this,this.onAppShow)),zs.core.removeAppHide(zs.Handler.create(this,this.onAppHide)),this.btnKnock&&this.btnKnock.offClick&&zs.proxy.Event.FGUIOffClick(this.btnKnock,this,this.onClick),this.onDispose(),super.dispose()}onAppShow(){this.isOpenAd&&(zs.product.get("zs_ready_click_two")||this.onFinish())}onAppHide(){this.isOpenAd&&(this.isOpenAd=!0)}apply(){return this.progress=0,this.rollbackNext=0,this.isOpenAd=!1,this.isGetAward=!1,this.bannerPoint=.01*zs.utils.randInt(100*this.bannerRange[0],100*this.bannerRange[1]),zs.core.addAppShow(zs.Handler.create(this,this.onAppShow,null,!1)),zs.core.addAppHide(zs.Handler.create(this,this.onAppHide,null,!1)),this.btnKnock&&this.btnKnock.onClick&&zs.proxy.Event.FGUIOnClick(this.btnKnock,this,this.onClick),this.btnKnock&&this.btnKnock.y&&(this.btnKnock.y+=this.btnSrcOffset),zs.Timer.inst.loop(1,this,this.tick),this.updateProgress(this.progress),zs.EggKnock&&zs.EggKnock.markReadyNum(!0),this}applyConfig(t){return t&&(null!=t.clickpercent&&(this.clickPercent=t.clickpercent),null!=t.click_percent&&(this.clickPercent=t.click_percent),null!=t.rollbackpercent&&(this.rollbackPercent=t.rollbackpercent),null!=t.rollback_percent&&(this.rollbackPercent=t.rollback_percent),null!=t.rollbackinterval&&(this.rollbackInterval=t.rollbackinterval),null!=t.rollback_interval&&(this.rollbackInterval=t.rollback_interval),null!=t.bannerrange&&Array.isArray(t.bannerrange)&&t.bannerrange.length>=2&&(this.bannerRange=t.bannerrange),null!=t.banner_range&&Array.isArray(t.banner_range)&&t.banner_range.length>=2&&(this.bannerRange=t.banner_range),null!=t.awarddelay&&Array.isArray(t.awarddelay)&&t.awarddelay.length>=2&&(this.awardDelay=t.awarddelay),null!=t.award_delay&&Array.isArray(t.award_delay)&&t.award_delay.length>=2&&(this.awardDelay=t.award_delay),null!=t.closedelay&&Array.isArray(t.closedelay)&&t.closedelay.length>=2&&(this.closeDelay=t.closedelay),null!=t.close_delay&&Array.isArray(t.close_delay)&&t.close_delay.length>=2&&(this.closeDelay=t.close_delay),null!=t.btnsrcoffset&&(this.btnSrcOffset=t.btnsrcoffset),null!=t.btn_src_offset&&(this.btnSrcOffset=t.btn_src_offset),null!=t.btndstoffset&&(this.btnDstOffset=t.btndstoffset),null!=t.btn_dst_offset&&(this.btnDstOffset=t.btn_dst_offset),null!=t.btnoffsetdelay&&(this.btnOffsetDelay=t.btnoffsetdelay),null!=t.btn_offset_delay&&(this.btnOffsetDelay=t.btn_offset_delay),null!=t.btnoffsettime&&(this.btnOffsetTime=t.btnoffsettime),null!=t.btn_offset_time&&(this.btnOffsetTime=t.btn_offset_time),null!=t.btnignoreoffset&&(this.btnIgnoreOffset=t.btnignoreoffset),null!=t.btn_ignore_offset&&(this.btnIgnoreOffset=t.btn_ignore_offset),t.awardevent&&(this.awardEvent=t.awardevent),t.award_event&&(this.awardEvent=t.award_event),t.closeevent&&(this.closeEvent=t.closeevent),t.close_event&&(this.closeEvent=t.close_event)),this.apply()}tick(){let t=zs.Timer.inst.delta;this.isOpenAd&&this.bannerTime>0&&this.bannerCount>0&&(this.bannerCount-=t,this.bannerCount<=0&&(zs.platform.sync.hideBanner(),this.onFinish())),this.bannerTime<=0&&this.btnOffsetCount&&this.btnOffsetCount>0&&(this.btnOffsetCount-=t,this.btnOffsetCount<=0&&(this.btnKnock&&this.btnKnock.y&&!this.btnIgnoreOffset&&zs.Tween.to(this.btnKnock,{y:this.btnKnock.y-this.btnDstOffset},this.btnOffsetTime),this.btnOffsetCount=null)),this.isGetAward?(null!=this.awardCount&&this.awardCount>0&&(this.awardCount-=t,this.awardCount<=0&&(this.awardEvent&&zs.core.workflow.runEventConfig(this.awardEvent),this.awardHandler&&this.awardHandler.run(),this.awardCount=null)),null!=this.closeCount&&this.closeCount>0&&(this.closeCount-=t,this.closeCount<=0&&(this.awardCount&&this.awardHandler&&this.awardHandler.run(),this.awardCount=null,this.closeEvent&&zs.core.workflow.runEventConfig(this.closeEvent),this.closeHandler&&this.closeHandler.run(),this.closeCount=null))):(this.rollbackNext<=0?(this.progress-=this.rollbackPercent,this.rollbackNext=this.rollbackInterval):this.rollbackNext-=t,this.clicked&&(this.onBannerCheck(),this.progress+=this.clickPercent,this.handleClick(this.progress)),this.clicked=!1,this.progress=Math.min(1,Math.max(0,this.progress)),this.updateProgress(this.progress),this.progress>=.999999&&this.onFinish())}onClick(){this.clicked=!0}onHandleClick(t){}handleClick(t){t>=this.bannerPoint&&!this.isOpenAd&&(this.isOpenAd=!0,this.bannerCount=this.bannerTime,zs.platform.sync.showBanner(),this.startButtonOffset())}startButtonOffset(){this.btnOffsetCount=this.btnOffsetDelay}updateProgress(t){}setEventHandler(t,e){return this.awardHandler=t,this.closeHandler=e,this}onFinish(){this.isGetAward||(this.onGetAward(),zs.Tween.clearAll(this.btnKnock),this.isGetAward=!0,this.awardCount=zs.utils.randInt(this.awardDelay[0],this.awardDelay[1]),this.closeCount=zs.utils.randInt(this.closeDelay[0],this.closeDelay[1]))}onBannerCheck(){}onGetAward(){zs.EggKnock&&zs.EggKnock.markAwardNum(!0)}onDispose(){}}r.inited=!1;class a extends zs.fgui.base{constructor(){super(...arguments),this.progressTime=.01,this.progressCount=0,this.current=0,this.progress=0}static preload(){return Promise((t,e)=>{t()})}init(){this.updateProgress(0)}updateProgress(t){this.view&&(this.view.loadingValue.text=t+"%")}run(t){if(this.progress=t,this.current<this.progress){this.progressCount+=.001*zs.Timer.inst.delta;let t=Math.round(this.progressCount/this.progressTime);this.progressCount-=t*this.progressTime,this.current+t>=this.progress?this.current=this.progress:this.current=this.current+t,this.updateProgress(this.current)}else if(this.progress>=100)return!0;return!1}}a.typeDefine=i;t.bind=function(t,e,s){if(null==t)return void zs.log.warn("资源包为空，无法绑定模板 "+e);let n=t.getItemByName(e);if(null==n)return void zs.log.warn("指定资源包（"+t.name+"）中不存在"+e+"组件，无法绑定指定模板");let i="ui://"+t.id+n.id;zs.proxy.setFGUIExtension(i,s)},t.readURL=function(t,e){if(null==t)return null;let s=t.getItemByName(e);return null==s?null:"ui://"+t.id+s.id},t.FGUI_item=e,t.FGUI_list=s,t.FGUI_msgbox=n,t.FGUI_Loading=i,t.EggKnock=r,t.Loading=a,t.LayaLoading=class extends zs.proxy.NativeLoading{},t.UIScene=class extends zs.proxy.UIScene{}}(window.zs.ui=window.zs.ui||{});